@using Microsoft.AspNet.Identity
@model IEnumerable<NWHarvest.Web.ViewModels.ListingViewModel>
@{
    var availableListings = Model.Where(l => l.IsAvailable == true && l.ExpirationDate >= DateTime.UtcNow && l.Grower.IsActive == true);
    var pendingPickupListings = Model.Where(l => l.IsAvailable == false && l.IsPickedUp == false  && l.ExpirationDate >= DateTime.UtcNow && l.FoodBank.UserId == User.Identity.GetUserId());
    var claimedListings = Model.Where(l => l.IsPickedUp == true && l.FoodBank.UserId == User.Identity.GetUserId());
}

<ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active"><a href="#availableListings" aria-controls="firstList" role="tab" data-toggle="tab">Available</a></li>
    <li role="presentation"><a href="#pendingPickupListings" aria-controls="secondList" role="tab" data-toggle="tab">Pending Pickup</a></li>
    <li role="presentation"><a href="#claimedListings" aria-controls="thirdList" role="tab" data-toggle="tab">Claimed</a></li>
</ul>

<!-- Tab panes -->
<div class="panel panel-default">
    <div class="panel-body">
        <div class="tab-content">
            <div role="tabpanel" class="tab-pane active" id="availableListings">
                <div>
                    @Html.Partial("__FoodBankAvailableTableListing", availableListings)
                </div>
            </div>
            <div role="tabpanel" class="tab-pane" id="pendingPickupListings">
                <div>
                    @Html.Partial("__FoodBankPendingPickupTableListing", pendingPickupListings)
                </div>
            </div>
            <div role="tabpanel" class="tab-pane" id="claimedListings">
                <div>
                    @Html.Partial("__FoodBankClaimedTableListing", claimedListings)
                </div>
            </div>
        </div>
    </div>
</div>
